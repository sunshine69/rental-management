{{- range $objName := index . "objs" }}
func {{$objName}}(w http.ResponseWriter, r *http.Request) {
    ProcessPreSteps(w, r, model.{{$objName}}{})
    if err := Form{{$objName}}.Save(); err != nil {
        fmt.Fprint(w, "[ERROR] while saving object. See the server log for details")
        fmt.Fprintf(os.Stderr, "%s", err.Error())
        return
    }
    fmt.Fprint(w, "Data saved")
}
func Search{{$objName}}(w http.ResponseWriter, r *http.Request) {
    fmt.Fprint(w, "TODO")
}
{{- end }}

func AddHandler(mux *http.ServeMux, Cfg *configs.Config) {
    {{- range $objName := index . "objs" }}
    mux.HandleFunc("POST "+Cfg.PathBase+"/{{lower $objName}}/search", Search{{$objName}})
    mux.HandleFunc("POST "+Cfg.PathBase+"/{{lower $objName}}", {{$objName}})
    {{- end }}
}