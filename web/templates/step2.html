<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Setup Project Helper</title>
    <link rel="stylesheet" href="/static/assets/style.css">
</head>
<body>
    <div class="container">
        <h1>Setup Project Helper</h1>
        <p>This is to generate your `vars-ansible.yaml` file at the start to reduce typo errors, etc.</p>
        <form action="/step2" method="post">
            {{ if eq .form1.ProjectType "config-pkg" }}
            <label title="{{ .help_multipipeline }}">MultiPipeline:</label>
            <select name="multipipeline">
                <option selected="true" value="no">no</option>
                <option value="yes">yes</option>
            </select>
            {{ end }}
            <label title="{{ .help_var_group_name }}">TFS Var group name:</label>
            <input type="text" name="Var_group_name" value="{{ .form2.Var_group_name }}"/>

            <h2>Packages</h2>
            <label for="checkboxValue">Enter Package Name:</label>
            <input type="text" id="checkboxValuePackage" placeholder="Enter value" />
            <button type="button" onclick="addCheckbox('checkboxGroupPackages', 'Packages[]', 'checkboxValuePackage')">Add Package</button>

            <div class="checkbox-group" id="checkboxGroupPackages">
                <h3>Added packages:</h3>
            </div>

            <h2>External Packages</h2>
            <label for="checkboxValue">Enter External Package Name:</label>
            <input type="text" id="checkboxValueExtPackage" placeholder="Enter value" />
            <button type="button" onclick="addCheckbox('checkboxGroupExtPackages', 'Packages_external[]', 'checkboxValueExtPackage')">Add External Package</button>

            <div class="checkbox-group" id="checkboxGroupExtPackages">
                <h3>Added ext ackages:</h3>
            </div>

            <hr/>
            <!-- Button Group with Spacer -->
            <div class="button-group">
                <input type="submit" name="submit" value="Next">
                <div class="spacer"></div>
                <input type="reset" name="reset" value="Reset">
            </div>
        </form>
    </div>
    <script>
        function addCheckbox(checkboxGroupName, checkboxName, checkboxInputID) {
            const checkboxValue = document.getElementById(checkboxInputID).value;
            if (checkboxValue.trim() === "") {
                alert("Please enter a value for the checkbox.");
                return;
            }

            const checkboxGroup = document.getElementById(checkboxGroupName);

            // Create a new div to hold the checkbox, label, and remove button
            const checkboxDiv = document.createElement("div");
            checkboxDiv.className = "checkbox-item";

            // Create a new checkbox input element
            const checkboxInput = document.createElement("input");
            checkboxInput.type = "checkbox";
            checkboxInput.name = checkboxName;
            checkboxInput.value = checkboxValue;
            checkboxInput.checked = true; // Automatically check the checkbox

            // Create a new label for the checkbox
            const checkboxLabel = document.createElement("label");
            checkboxLabel.innerText = checkboxValue;

            // Create a remove button
            const removeButton = document.createElement("button");
            removeButton.type = "button";
            removeButton.innerText = "Remove";
            removeButton.style.marginLeft = "10px";
            removeButton.onclick = function() {
                checkboxDiv.remove(); // Removes the entire div containing the checkbox and label
            };

            // Append the checkbox input, label, and remove button to the div
            checkboxDiv.appendChild(checkboxInput);
            checkboxDiv.appendChild(checkboxLabel);
            checkboxDiv.appendChild(removeButton);

            // Append the div to the checkboxGroup
            checkboxGroup.appendChild(checkboxDiv);

            // Clear the text input
            document.getElementById("checkboxValue").value = "";
        }
    </script>
</body>
</html>
